# JustIce

Программа для сборки модулей JustMC из читаемого "кодоподобного" формата.

## Использование программы

`justice.exe -h` — Помощь по доступным параметрам,\
`justice.exe -p <files>` — Собрать исходный код в модуль,\
`justice.exe -m <files>` — Разобрать модуль в исходный код.

## Синтаксис

```
event player_join {
  player_send_message(messages={ l"&b&oДобро пожаловать!" });
  not if_player_name_equals(names={ "lemonhead2000" }) {
    call_function(function_name="gift");
  }
}

gift {
  repeat_while game_player_online(players={ <default>name }) {
    control_wait(ticks=2);
    player_give_items<default>(items={ id: diamond });
  }
}
```

### Строчки
Строчки состоят из 3х частей: типа обработчика (`event`), названия (`player_join`, `gift`) и тела (`{ ... }`).

Тип обработчика может быть одним из следующих: `function`, `process` или `event`. По умолчанию используется `function`.

### Действия
Действия состоят из 6 частей: названия (`repeat_while`, `player_give_items`), вложенного действия (`game_player_online`), отрицания (`not`), выборки (`<...>`), аргументов  (`( ... )`) и тела (`{ ... }`)

Аргументы, в отличие от jmcc, указываются как пара название-значение.\
Всё, кроме названия, можно опустить для простых действий (например `game_cancel_event;`)

Таким действиям как `player_send_message` можно указать несколько значений в одном аргументе используя список, перечисляя все значения через запятую в фигурных скобках.

### Значения
На JustMC *11* типов значений: *Число*, *Текст*, *Переменная*, *Игровое значение*, *Местоположение*, *Вектор*, *Предмет*, *Звук*, *Зелье*, *Частица* и, дополнительно, *Маркер*.

#### Число
Числа записывается в том же формате что и на JustMC. Для указания чисел-плейсхолдеров, просто укажите этот плейсхолдер без дополнительных скобок или кавычек. (`0.123`, `1e-6`, `%players_online%`)

#### Текст
Текстом является любая последовательность символов в двойных кавычках (`"`). Тип текста указывается с помощью единственного символа перед начальной кавычкой:
- `p` = `Простой`,
- `l` = `Цветной`,
- `m` = `Стилизованный`,
- `j` = `JSON`.

По умолчанию используется Простой тип текста. (`"Hello, World!"`, `m"<red><bold>!!!</bold></red>"`)

#### Переменная
Переменной является последовательность непрерывных латино-цифровых символов, либо любая последовательность символов в обратных кавычах (`` ` ``). Область переменной указывается только во втором случае подобно тексту:
- `l` = `Локальная`
- `g` = `Игровая`
- `s` = `Сохранённая`

По умолчанию используется Локальная область переменной. (`balance`, `` `Переменная 24` ``, ``g`%player%@balance` ``)

#### Игровое значение
Игровое значение состоит из выборки в треугольных скобках и названием значения. Выборку можно опустить для глобальных значений. (`<default>current_health`, `<>selected_target_names`)

#### Маркер
Маркер это специальное значение, использующееся в маркерах. Последовательность любых символов в одиночных кавычках (`'`). (`'SPACES'`, `'DISABLE'`)

### Конструкторы
Следующие значения называются *Конструкторами*, они создаются при помощи дополнительных аргументов в фигурных скобках.

#### Местоположение (location)
Перечисление из 3х (`x, y, z`) или 5х (`x, y, z, yaw, pitch`) значений. (`location{ 0, -64, 0 }`, `location(-212.5, 31, 12.5, 90, 0)`)

#### Вектор (vector)
Перечисление из 3х значений (`x, y, z`). (`vector(0, 0, 1)`, `vector(0, 1, 2)`)

#### Предмет (item)
NBT представление предмета. (`item{ id: diamond, count: 1, components: { item_name: "Изумруд" } }`)

#### Звук (sound)
Название звука и дополнительные параметры: `volume=<число>`, `pitch=<число>`, `source=<текст>`, `variant=<текст>`. (`sound{ "entity.player.death" }`, `sound{ "block.note_block.ping", pitch=2, source="BLOCKS" }`)

#### Зелье (potion)
Название зелья и дополнительные параметры: `amplifier=<число>`, `duration=<число>`. (`potion{ "speed" }`, `potion{ "strength", amplifier=1, duration=400 }`)

#### Частица (particle)
Название частицы и дополнительные параметры: `material=<текст>`, `spread={ <число>, <число> }`, `motion={ <число>, <число>, <число> }`, `count=<число>`, `color=<цвет в формате #012ABC>`, `size=<число>`.
(`particle{ "DUST", color=#f0f0f0, count=5 }`, `particle{ "CLOUD", motion={ 0, 1, 0 }, spread={ 1, 1 }, count=10 }`)
